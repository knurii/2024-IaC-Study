# 1주차

## 1. IaC 개념 및 특징

### 1.1 개념

![Untitled](1%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20bfaadccf2bd847f89ff9190b50a5cbb5/Untitled.png)

- 인프라를 물리적 하드웨어 설정이 아니라 소프트웨어 코드로 관리하는 개념
- 인프라의 설정과 배포가 프로그래밍 코드처럼 반복 가능하고 예측 가능한 방식으로 이루어짐
- 특징
    - **버전 관리**: 인프라 코드가 버전 관리 시스템을 통해 관리되어 변경 이력 추적 가능
    - **자동화**: 인프라 설정과 배포 과정이 자동화되어 수작업 오류를 줄이고 배포 시간을 단축
    - **일관성**: 동일한 설정을 여러 환경에 반복적으로 적용할 수 있어 일관된 환경 구성을 보장
    - **확장성**: 코드 기반으로 인프라를 관리하므로 규모가 큰 환경에서도 효율적으로 운영 가능

### 1.2 접근 방식

### 1.2.1 선언적 접근

- 필요한 리소스와 리소스의 속성 등 바람직한 시스템 상태를 정의하면, IaC 툴이 바람직한 상태로 구성해줌
- 시스템 오브젝트의 현재 상태 목록을 유지하며, 이를 통해 인프라를 더 쉽게 관리 가능

### 1.2.2 명령형 접근

- 바람직한 구성을 얻기 위한 특정 명령을 정의
- 정의된 명령을 올바른 순서로 실행해야 함
- 많은 IaC 툴이 선언적 접근 방식에 따라 원하는 인프라를 자동으로 프로비저닝함

## 2. IaC 등장 배경

- **클라우드 컴퓨팅의 확산**
    
    클라우드 서비스 제공자(CSP)들이 다양한 리소스를 제공함에 따라, 이를 코드로 관리하려는 요구가 증가
    
- **애자일 및 DevOps 문화**
    
    빠르고 빈번한 배포 주기를 지원하는 애자일 및 DevOps 문화가 확산되면서, 인프라를 코드로 관리하여 개발과 운영 간의 경계를 허물고 협업을 증진하려는 필요성이 대두됨
    
- **복잡한 인프라 환경**
    
    대규모 시스템에서 수작업으로 인프라를 관리하는 것은 비효율적이고 오류가 발생하기 쉬우므로, 이를 자동화하려는 요구
    

## 3. IaC 주요 도구들

![Untitled](1%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20bfaadccf2bd847f89ff9190b50a5cbb5/Untitled%201.png)

### 3.1 인프라 구축 도구

### 3.1.1 Terraform

- **개발사**: HashiCorp
- **특징**
    - 클라우드 플랫폼에 종속되지 않는 오픈 소스 도구
    - HCL(HashiCorp Configuration Language)이라는 선언적 언어를 사용하여 인프라를 정의
    - 멀티클라우드 환경에서 일관된 인프라 관리를 지원

![Untitled](1%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20bfaadccf2bd847f89ff9190b50a5cbb5/Untitled%202.png)

- AWS에서 EC2 인스턴스를 생성하는 간단한 예시 코드
- 인스턴스 위치, 이미지, 규격 등 결정하고 인스턴스에 웹 서버까지 설치하는 역할 수행
    - 우선 프로바이더로 AWS 설정 및 리전 명시
    - 그 후 운영체제와 스펙을 정의한 대로 EC2 가상 머신 생성
    - 해당 인스턴스 생성 후 실행될 명령어 정의

### 3.1.2 AWS CloudFormation, Azure Resource Manager, Google Cloud Deployment Manager

- **AWS CloudFormation**
    - AWS에서 제공하는 IaC 도구
    - JSON 또는 YAML 파일을 사용하여 AWS 리소스를 정의하고 프로비저닝
- **Azure Resource Manager**
    - Microsoft Azure의 IaC 도구
    - JSON 템플릿을 사용하여 Azure 리소스를 관리
- **Google Cloud Deployment Manager**
    - Google Cloud Platform에서 제공하는 IaC 도구
    - YAML, Python 또는 Jinja2 템플릿을 사용하여 GCP 리소스를 정의

### 3.2 구성 관리 도구

### 3.2.1 Ansible

- **개발사**: Red Hat
- **특징**
    - 시스템 설정, 소프트웨어 배포, 작업 자동화 등 다양한 작업 자동화에 사용됨
    - 에이전트리스 방식으로 SSH를 통해 서버에 접속하여 구성을 관리
        - 즉, 개발자의 PC에서 명령을 수행하면 이것이 대상 시스템에 전달되는 구조
    - YAML 기반의 플레이북을 사용하여 인프라 설정을 정의
    - 러닝커브가 낮고 사용 간편함
    - 어떤 명령을 실행해야 하는지 명시적으로 기술하는 대신, 원하는 최종 상태를 정의하고 앤서블이 해당 상태로 수렴하도록 함

![Untitled](1%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20bfaadccf2bd847f89ff9190b50a5cbb5/Untitled%203.png)

- 앤서블을 사용해 웹 서버 그룹 web_servers에 Nginx를 설치하고, 구성하는 작업을 정의함
    - apt 패키지 관리자를 통해 Nginx를 설치하여 웹 서버에 필요한 소프트웨어를 배포함
    - 또, 사전 정의된 Nginx 구성파일(files/nginx.conf)을 대상 서버로 복사하고, 변경이 있으면 Nginx 서비스를 재시작하여 새로운 구성을 적용함

### 3.2.2 SaltStack

- **개발사**: SaltStack (VMware에 인수됨)
- **특징**
    - 고성능의 이벤트 중심 인프라 자동화 도구
    - YAML을 사용하여 상태 파일을 작성
    - 에이전트 기반 및 에이전트리스 모드 모두 지원

### 3.2.3 Chef

- **개발사**: Progress Software
- **특징**
    - 루비(Ruby) 기반의 DSL(Domain-Specific Language)을 사용하여 인프라 구성을 코드로 작성
    - 에이전트 기반으로 작동하며, 복잡한 인프라 관리에 적합

---

# 기타

# 프로비저닝과 배포

## 프로비저닝 vs. 배포 vs. 오케스트레이션

### 프로비저닝

시스템, 데이터 및 소프트웨어로 서버를 준비하고 네트워크 작동을 준비합니다.

Puppet, Ansible 등과 같은 구성 관리 도구를 사용하여 서버를 프로비저닝할 수 있습니다.

이처럼, 클라우드 서비스를 시작하고 구성하는 것을 "프로비저닝"한다고 합니다.

### 배포

배포는 프로비저닝된 서버를 실행하기 위해 애플리케이션 버전을 제공하는 작업입니다.

지속적 배포는 AWS CodePipeline, Jenkins, Github Actions를 통해 수행할 수 있습니다.

### 오케스트레이션

오케스트레이션은 여러 시스템 또는 서비스를 조정하는 작업입니다.

마이크로서비스, 컨테이너 및 Kubernetes로 작업할 때 일반적인 용어입니다.

오케스트레이션 도구로는 Kubernetes, Salt, Fabric가 있습니다.